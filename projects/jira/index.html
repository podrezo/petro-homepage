<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="Petro Podrezo: Full-stack Software Developer"><meta name=author content="Petro Podrezo"><title>Petro Podrezo: Jira Connector for Google Data Studio</title><link rel=icon type=image/svg+xml href=/lego.svg><link rel="alternate icon" ype=image/png href=/lego.png><link rel=stylesheet href=https://podrezo.com/root.min.316b98a694df14c2fc95bd35f59ffe5006aaf1d89f1f66360a4c696e2b698a45.css></head><body><div class="container mt-5"><div class="row mb-4"><div class=col-lg-12><h1 class=title><img src=/lego.svg type=image/svg+xml> Petro Podrezo <small>Software Engineer</small></h1><hr><ul class=nav><li class=nav-item><a class=nav-link href=https://podrezo.com/>Home</a></li><li class=nav-item><a class=nav-link href=https://podrezo.com/projects/>Projects</a></li><li class=nav-item><a class=nav-link href=https://podrezo.com/contact/>Contact</a></li></ul></div></div><div class=row><div class=col-lg-12><h1 id=jira-connector-for-google-data-studio>Jira Connector for Google Data Studio</h1><p>Jira for Google Data Studio is a community connector for Google&rsquo;s Data Studio product. It allows you to pull statistics like story lead time into Data Studio and generate reports that help your team gather insights into potential process changes that may improve delivery.</p><p><p><img class="rounded mx-auto d-block img-thumbnail" src=/images/jira-datastudio/datastudio-example.png alt="Example chart showing team throughput"></p></p><h2 id=how-does-it-work>How does it work?</h2><p>Data Studio is a free product offered by Google that allows you to build reports using a plethora of data sources. With this connector you will be able to add a data source that targets your Jira instance. The connector code runs as a Google Apps Script (similar to Google Sheets scripts) in the context of your Google account. This connector code makes requests to my proprietary API which pulls data from Jira and crunches the statistics.</p><h2 id=usage>Usage</h2><p>The connector is not currently public; eventually my goal is to submit it to Google so that it will appear in the <a href=https://datastudio.google.com/data>Data Studio Connector Gallery</a> but <strong>in the meantime access must be requested from me directly</strong>. If you need assistance getting it set up, please contact me.</p><h3 id=setting-it-up>Setting it up</h3><p>Once you have been granted access to the connector itself, you will need to add it as a data source to your report.</p><p>You will be prompted for your Jira credentials - for this you will need your Jira token. To issue a new access token for your user go to your Jira account settings, then go to <code>Security > API Token > Create and manage API tokens</code> and create a new token. The token will be copy/pasted to the token field in Data Studio and your username will be your Jira e-mail <em>prefixed with the instance ID and a forward slash</em>. This is required because each Jira instance runs on its own subdomain and without knowing which domain is associated with your username it will be impossible to connect to the API. So, for example if you access Jira via <code>https://mycompany.atlassian.net/</code> and if your Jira e-mail is <code>janesmith@zzz.com</code> then your username for the purposes of the Data Studio connector will be <code>mycompany/janesmith@zzz.com</code>.</p><p>Once authentication has succeeded, you will be prompted to enter a JQL query and select the type of report you&rsquo;re interested in. The JQL query is essentially the filter for which issues you want to calculate statistics for. At its simplest, this could be <code>project = XYZ</code> but you can play with the &ldquo;issues&rdquo; view in Jira to create more customized filters to match your needs. For example, you may want to ignore sub-tasks and epics (<code>project = XYZ AND issuetype != Sub-task AND type not in ("Epic")</code>). For more info regarding JQL check out <a href=https://support.atlassian.com/jira-software-cloud/docs/what-is-advanced-searching-in-jira-cloud/>Atlassian&rsquo;s documentation</a> on the subject.</p><p>For the &ldquo;report type&rdquo; select whichever one you are interested in. If you want both, which is likely, you&rsquo;ll simply need to add a second data source using the same JQL query but the opposite report type.</p><h3 id=whats-the-difference-between-the-issue-and-daily-report-types>What&rsquo;s the difference between the &ldquo;Issue&rdquo; and &ldquo;Daily&rdquo; report types?</h3><p>In Data Studio there is a concept of &ldquo;dimensions&rdquo; (ways to categorize data points) and &ldquo;metrics&rdquo; (which are statistics that can be applied in aggregate to groups of data points). For values like lead time (a metric) the corresponding smallest dimension is the issue key (e.g. XYZ-123). However, for values like the number of issues in WIP or the cumulative finished issues there is no corresponding issue key - the smallest dimension (really pair of dimensions) for that value is the day which you are looking at and the issue type. For this reason, calculating WIP/finished issues/throughput is impossible to do without also separating the concept of lead times.</p><h3 id=how-are-lead-times-calculated>How are lead times calculated?</h3><p>Lead times are calculated as the number of seconds since the time the issue first transitioned from the &ldquo;To Do&rdquo; state until the exact second that it last time it transitioned into the &ldquo;Done&rdquo; state. Anything that happened in between, including multiple moves to/from the &ldquo;To Do&rdquo; and &ldquo;Done&rdquo; states will be ignored. Issues that are not completed are completely ignored - only issues that are in &ldquo;Done&rdquo; will be counted. Weekends are ignored for the purposes of lead time calculations - if the period between when an issue was started and finished crosses a weekend, or multiple weekends, the entire 48 hour period of Saturday and Sunday is subtracted from the lead time.</p><h3 id=how-is-wip-calculated>How is WIP calculated?</h3><p>WIP is calculated as of 23:59 (in your local time, as per the Jira timezone setting) of every day. That is, if you started an issue at 9AM and finished it at 5PM it will not show up as WIP because it was not in WIP at 23:59. This way WIP is only calculated for work that is carrying over from one day to the next rather than during at any point in the day when the figure will probably vary a lot.</p><h2 id=tips-to-get-the-most-out-of-it>Tips to get the most out of it</h2><ol><li>Strictly separate your issues into different &ldquo;Issue Types&rdquo; in Jira. Group similar types of work together (e.g. Stories, Spikes, Documentation work, Support requests) to ensure that the insights for a particular type of work can be seen. For example, you may notice that your throughput for support requests went way up at a certain point but at the cost of your story throughput going down. If you do not have separate issue types for the two you would just see a flat throughput and may not notice that kind of thing.</li><li>If certain issues are skewing your stats in a way that is making the stats hard to use, you can add a label to said issues in Jira and the filter out issues that have that label using your JQL query.</li><li>To get a lead time histogram you may want to use the third-party visualization called &ldquo;Histogram&rdquo; as there is no native chart of this type. You can also use a workaround to get a histogram by creating a bar chart and using <code>CASE</code> statements to group your values into buckets.</li></ol><h2 id=security>Security</h2><p>I&rsquo;ve tried to proactively address some security concerns you may have.</p><h3 id=why-does-the-connector-need-an-additional-hop-between-jiras-api-to-your-own-api>Why does the connector need an additional hop between Jira&rsquo;s API to your own API?</h3><p>This additional hop is required in order to greatly speed up the rate at which records are tabulated and returned. Google App Scripts (the connector code itself) runs on limited processing power and does not have any way to store state (e.g. cache results). Suppose you have 2000 issues in Jira returned by your JQL query - this would require 20 Jira API requests (Jira paginates results by 100 issues) for every single chart or table in your report (Data Studio issues a new data request for each control). Running a report that has 10 charts would not only end up flooding Jira&rsquo;s API with 200 requests every time but also it would be so slow that the report would be unusable.</p><h3 id=where-are-my-jira-credentials-stored>Where are my Jira credentials stored?</h3><p>Credentials are stored as properties on your own Google account - this is the only place they are persisted. When a request is made to the connector&rsquo;s API (the intermediary layer between the connector and Jira itself) the credentials are passed along in an HTTPS request but not stored anywhere. When the results from Jira are tallied and processed, the results (which contain only things like the issue key, the lead time, and start/finish date - nothing sensitive) are persisted in a cache that gets cleared every day. The cache uses an SHA256 hash of your credentials and some other meta data as the key so finding the appropriate cache item for your request does not require persisting your credentials in any direct way.</p><h3 id=what-are-my-jira-credentials-used-for>What are my Jira credentials used for?</h3><p>Only to do issue searches and confirm if the credentials are valid. No data will ever be modified in your Jira board.</p></div></div><div class="row footer mt-5 mb-5"><div class="col-lg-12 text-right"><hr>&copy; 2020 Petro Podrezo</div></div></div></body></html>